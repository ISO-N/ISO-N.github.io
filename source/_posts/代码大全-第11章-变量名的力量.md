---
title: 第11章 变量名的力量
date: 2026-02-17 15:25:01
categories:
- [软件工程, 理论]
tags:
- 代码大全
---
本章核心：**好的变量名是可读代码的基础**。命名是编程中最重要的智力活动之一，值得花时间认真对待。

---

## 11.1 选择好变量名的注意事项

- 好名字的关键：**完整且准确地描述变量所代表的事物**
- 变量名应回答的问题：这个变量代表什么（*what*），而非如何实现（*how*）
- 平均名字长度在 **10~16 个字符**时，调试难度最低（研究结论）

<aside>
💡

命名的目标：**让代码读起来像自然语言一样流畅**。如果必须回头看定义才能理解，说明名字起得不够好。

</aside>

### 好命名 vs 坏命名示例

| **场景** | **差命名** | **好命名** |
| --- | --- | --- |
| 当前日期 | `d`, `d1`, `date` | `currentDate`, `todaysDate` |
| 每页行数 | `x`, `num` | `linesPerPage` |
| 运行总数 | `t`, `total` | `runningTotal`, `checkTotal` |

---

## 11.2 以问题为导向的命名

- 好名字通常**描述"是什么"（what）**，而非"怎么做"（how）
- 面向问题域（*problem domain*）命名优于面向计算域（*solution domain*）
- 例如：用 `employeeRecord` 而非 `inputRec`；用 `printerReady` 而非 `bitFlag`

---

## 11.3 最佳命名长度

- **太短**（如 `x`, `n`）→ 信息不足
- **太长**（如 `numberOfPeopleOnTheUsOlympicTeam`）→ 阅读困难
- 最佳区间通常在 **8~20 个字符**之间
- 作用域越小，名字可以越短；作用域越大，名字应该越具描述性

---

## 11.4 变量名中的计算值限定词

- 常见限定词：`Total`、`Sum`、`Average`、`Max`、`Min`、`Count`、`Index`、`Num`
- **建议统一放在名字的末尾**：`revenueTotal`、`expenseAverage`
- 唯一例外是 `Num`：放在前面表示总数（`numCustomers`），放在末尾表示索引（`customerNum`），容易混淆
- 更好的方式：用 `Count` 或 `Total` 替代 `Num` 表示总数，用 `Index` 替代 `Num` 表示索引

---

## 11.5 常见变量名的约定

### 循环变量

- 简单循环中 `i`, `j`, `k` 是可接受的
- **嵌套循环中应使用更具描述性的名字**，如 `teamIndex`, `playerIndex`，降低混淆几率
- 若循环变量在循环外还有使用，必须给一个更有意义的名字

### 状态变量

- 避免使用 `flag` 这个名字——它什么都没有表达
- 用有意义的枚举值或布尔名：`dataReady`、`reportType`、`recalcNeeded`

### 临时变量

- `temp` 这种名字通常说明你还没想清楚变量的用途
- 用更精确的名字替代：`tempSwapValue`、`oldValue`

### 布尔变量

- 用隐含 **"真/假"** 含义的名字：`done`、`found`、`success`、`error`
- 更好的做法是以正面含义命名：用 `found` 而非 `notFound`
- 常用前缀：`is`、`has`、`can`、`should`
- 例如：`isReady`、`hasError`、`canRetry`

### 枚举类型

- 使用统一的组前缀以表明归属：`Color_Red`、`Color_Blue` 或 `PLANET_EARTH`

---

## 11.6 非正式命名约定的力量

应该在项目级别建立一组**团队共识的命名约定**，能带来的好处：

- 减少命名决策时间
- 同类概念统一表达
- 代码审查更高效
- 弥补编程语言的不足

<aside>
⚠️

**命名约定最重要的不是选哪种，而是团队保持一致。** 不一致的命名比没有约定更糟糕。

</aside>

### 常见约定维度

- **区分类和对象**：`Widget`（类） vs `widget`（对象）
- **区分全局 / 局部 / 成员变量**：通过前缀或命名风格区分
- **区分类型名和变量名**
- **常量全部大写**：`MAX_RETRY_COUNT`

---

## 11.7 缩写（缩短变量名）的通用规则

<aside>
🚫

最安全的策略：**不要缩写。** 除非名字确实过长，才考虑缩写。

</aside>

### 如果必须缩写

1. 使用标准的、公认的缩写（如 `num`、`temp`、`str`）
2. 去掉虚词（`and`、`or`、`the`）
3. 去掉非首字母元音：`computer` → `cmptr`
4. 截断到每个单词的前几个字母
5. 保留第一个和最后一个字母
6. 在项目级别维护一份**缩写对照表**，保证一致性

### 缩写的危险

- 缩写节省的输入时间微乎其微（IDE 有自动补全）
- 但缩写造成的阅读困难是**持续的**
- 一个变量被**读的次数远多于被写的次数**

---

## 11.8 应该避免的命名方式

- [ ]  避免使用**误导性**的名字（名字暗示的含义和实际不同）
- [ ]  避免含义相似的名字（`input` vs `inputValue` vs `inputData`）
- [ ]  避免只靠**数字后缀**区分（`file1`, `file2`）
- [ ]  避免**拼写错误**的名字
- [ ]  避免**仅靠大小写**区分的名字（`count` vs `Count` vs `COUNT`）
- [ ]  避免使用**与语言关键字冲突**的名字
- [ ]  避免在名字中使用**数字替代字母**（如 `o2` 代替 `oTo`）
- [ ]  避免**故意拼错**来缩短名字（如 `hilite` 代替 `highlight`）

---

## 核心要点总结

<aside>
✅

**好变量名 = 完整描述 + 一致约定 + 避免缩写 + 面向问题域**

花在命名上的时间，能在后续阅读、调试、维护中获得数倍回报。

</aside>