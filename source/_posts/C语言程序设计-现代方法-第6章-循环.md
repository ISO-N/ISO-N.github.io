---
title: 第6章 循环
date: 2026-02-17 02:20:22
categories:
- [编程技术, C]
---
## 6.1 while 语句

`while` 循环在每次迭代**之前**检查条件：

```c
while (表达式)
    语句
```

- 先求值**表达式**，若为真（非零）则执行语句，然后再次求值表达式……
- 若表达式一开始就为假，循环体**一次也不执行**

### 示例：倒计时

```c
int i = 10;
while (i > 0) {
    printf("%d ", i);
    i--;
}
// 输出: 10 9 8 7 6 5 4 3 2 1
```

### 无限循环

```c
while (1) {
    // 循环体
    // 需要 break 或 return 来退出
}
```

## 6.2 do 语句

`do-while` 循环在每次迭代**之后**检查条件，因此循环体**至少执行一次**：

```c
do
    语句
while (表达式);
```

<aside>
📌

注意 `do-while` 末尾的**分号 `;`** 不能省略，这是初学者容易遗漏的地方。

</aside>

### 示例：读取正整数

```c
int n;
do {
    printf("请输入一个正整数: ");
    scanf("%d", &n);
} while (n <= 0);
```

### while vs do-while

- `while`：先判断后执行，循环体可能**零次**执行
- `do-while`：先执行后判断，循环体**至少一次**执行
- 大多数情况下优先使用 `while`，只在需要"至少执行一次"时使用 `do-while`

## 6.3 for 语句

`for` 循环是最常用的循环形式，特别适合**计数型**循环：

```c
for (初始化; 条件; 递进)
    语句
```

等价于：

```c
初始化;
while (条件) {
    语句
    递进;
}
```

### 示例：打印 1 到 10

```c
for (int i = 1; i <= 10; i++)
    printf("%d ", i);
```

### for 语句的灵活性

三个表达式中的任意一个都可以**省略**：

```c
// 省略初始化
i = 0;
for (; i < 10; i++) { ... }

// 省略条件（无限循环）
for (;;) { ... }

// 省略递进
for (i = 0; i < 10;) {
    ...
    i++;
}
```

### 逗号运算符

`for` 语句中可以使用**逗号运算符**在初始化或递进部分放置多个表达式：

```c
for (i = 0, j = 10; i < j; i++, j--)
    printf("%d %d\n", i, j);
```

- 逗号运算符从左到右求值，整个表达式的值为**最右边**表达式的值
- 逗号运算符的优先级是所有运算符中**最低的**

### C99 中的 for 语句

C99 允许在 `for` 的初始化部分**声明变量**：

```c
for (int i = 0; i < n; i++)
    printf("%d\n", i);
// 注意：i 的作用域仅限于 for 循环内部
```

## 6.4 退出循环

### break 语句

`break` 用于**立即跳出**当前最内层的 `while`、`do-while`、`for` 或 `switch`：

```c
for (int i = 0; i < 100; i++) {
    if (i * i > 500)
        break;          // 找到第一个平方大于500的数就退出
    printf("%d ", i);
}
```

<aside>
⚠️

`break` 只能跳出**一层**循环。在嵌套循环中，`break` 只跳出最内层循环。

</aside>

### continue 语句

`continue` 用于**跳过本次迭代**的剩余部分，直接进入下一次迭代：

```c
for (int i = 0; i < 10; i++) {
    if (i % 2 != 0)
        continue;       // 跳过奇数
    printf("%d ", i);   // 只打印偶数: 0 2 4 6 8
}
```

- 在 `while` / `do-while` 中，`continue` 跳转到**条件判断**
- 在 `for` 中，`continue` 跳转到**递进表达式**，然后再判断条件

### goto 语句

`goto` 可以跳转到同一函数内的任意**标签**处：

```c
for (int i = 0; i < n; i++)
    for (int j = 0; j < m; j++)
        if (a[i][j] == target)
            goto found;

printf("未找到\n");
goto done;

found:
    printf("找到了\n");
done:
    ;
```

<aside>
💡

`goto` 的唯一合理用途是**跳出多层嵌套循环**（`break` 只能跳出一层）。除此之外应避免使用 `goto`，因为它会降低代码可读性。

</aside>

## 6.5 空语句

**空语句**就是单独的一个分号 `;`，不执行任何操作：

```c
for (i = 0; i < n; i++)
    ;  // 空语句，循环体什么都不做
```

<aside>
⚠️

小心在 `if`、`while`、`for` 后面意外放置分号：

```c
if (n > 0);          // 分号导致空语句，下面的 printf 总会执行！
    printf("正数\n");

while (i < 10);      // 无限循环！因为循环体是空语句
    i++;
```

</aside>

> 三种循环的选择：**`for`** 适合计数型循环，**`while`** 适合条件不确定的循环，**`do-while`** 适合至少执行一次的循环。
>