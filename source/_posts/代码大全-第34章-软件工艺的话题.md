---
title: 第34章 软件工艺的话题
date: 2026-02-17 15:25:19
categories:
- [软件工程, 理论]
tags:
- 代码大全
---
## 🎯 本章主题

第 34 章是全书的"总结性"章节，将贯穿全书的多个**跨领域主题**（cross-cutting themes）提炼出来，强调它们在软件构建中的核心地位。

---

## 🧩 征服复杂度（Conquer Complexity）

- 软件构建的**首要技术使命**就是管理复杂度
- 没有人的大脑能同时装下一个中等规模程序的全部细节
- **降低复杂度的手段**：
    - 将系统分解为子系统、包、类、子程序等多个层次
    - 保持子程序短小，减少需要同时思考的信息量
    - 编写易读的代码，减少理解成本
    - 使用约定（conventions）代替每次的即兴决策
- 如果某个设计或代码让你"必须记住很多东西才能理解"，说明复杂度过高，需要重构

---

## 📐 选择恰当的过程（Pick Your Process）

- 在项目**开始前**有意识地选择开发过程
- 过程的选择要**匹配项目规模和性质**
    - 小项目：轻量过程，快速迭代
    - 大项目：更正式的设计、评审、测试流程
- 不管什么过程，都应包含：需求分析 → 设计 → 编码 → 评审 → 测试
- 关键是**有意识地做出选择**，而非随波逐流

---

## ✍️ 首先为人写程序，其次才是为计算机（Write Programs for People First, Computers Second）

- **可读性**是代码最重要的质量属性之一
- 代码被**阅读的次数远多于编写的次数**
- 可读的代码更容易理解、评审、调试和修改
- 实现可读性的手段：
    - 有意义的命名
    - 良好的格式化和布局
    - 恰当的注释
    - 清晰的控制流
- 不要为了"聪明"或"炫技"牺牲可读性

---

## 🗣️ 深入一门语言去编程，而不是仅在一门语言上编程（Program *into* a Language, Not *in* It）

- **"在"一门语言上编程**：受限于语言本身提供的特性，被动地使用
- **"深入"一门语言去编程**：先想清楚要表达什么，再用语言去实现
- 如果语言不直接支持你的想法，可以通过**约定和编码标准**来弥补
- 不要因为"语言不支持"就放弃好的编程实践（如断言、命名约定、信息隐藏等）
- 始终用**编程的原则**来指导你对语言特性的使用

---

## 🔍 借助约定集中注意力（Use Conventions to Focus Attention）

- 约定（conventions）能将**重复性决策**自动化，解放心智资源
- 常见的约定类型：
    - **命名约定**：变量名、类名、常量名的格式规则
    - **格式化约定**：缩进、空行、大括号位置等
    - **注释约定**：何时注释、注释的格式和内容
    - **编码实践约定**：错误处理方式、参数传递规则等
- 约定的价值不在于选择哪个特定规则，而在于**团队一致性**
- 一致的约定降低了阅读他人代码的认知负担

---

## 📊 基于问题域编程（Program in Terms of the Problem Domain）

- 代码应尽量在**问题域**（problem domain）的抽象层次上编写，而非底层实现细节
- 自上而下的抽象层次：
    1. **问题域层**：高层业务逻辑
    2. **方案域层**：实现方案的结构和算法
    3. **底层实现层**：语言特性和数据结构
- 使用**有意义的抽象**让代码"讲述"问题域的故事
- 将底层操作封装到子程序和类中，让高层代码只关心"做什么"而非"怎么做"

---

## 👀 当心落石（Watch for Falling Rocks）

- 编程中的**警告信号**需要引起注意：
    - 一个类超过 7 个数据成员
    - 子程序超过 200 行
    - 嵌套超过 3-4 层
    - 大量全局变量
    - 一个子程序有很多参数
    - 类之间存在过多耦合
    - 注释解释的是"怎么做"而非"为什么"
- 这些迹象提示代码**需要重构或重新设计**
- 培养对"代码异味"（code smell）的直觉

---

## 🔄 迭代，反反复复地迭代（Iterate, Repeatedly, Again and Again）

- **迭代**是软件开发中最强大的技术之一
- 几乎所有构建活动都受益于迭代：
    - 需求可以迭代细化
    - 设计可以迭代改进
    - 代码可以迭代重构
    - 测试可以迭代完善
- **第一次做出的方案几乎从来不是最好的**
- 不要害怕推翻第一版设计或代码——迭代改进是常态
- 迭代不是返工的借口，而是承认软件开发的**不确定性**并主动管理它

---

## 🚫 不要迷信（Thou Shalt Not Be Dogmatic）

- 软件工程中没有**放之四海而皆准**的规则
- 本书中的每一条建议都有例外场景
- **关键原则**：
    - 理解规则背后的**原因**，而非盲从规则本身
    - 面对具体问题时，权衡各种方案的**利弊**
    - 根据项目实际情况做出**务实的选择**
- 好的程序员懂得在"最佳实践"和"实际约束"之间寻找**平衡点**
- 经验和判断力比任何单一规则都更有价值

---

## 📝 核心要点速记

- 编程首先是与人沟通，其次才是与计算机沟通
- **管理复杂度**是软件构建的首要任务
- 约定能减少不必要的决策，提升团队效率
- 基于**问题域**而非实现域编程，让代码更具表达力
- **迭代**是通往高质量软件的必经之路
- 保持务实，不迷信任何教条